(()=>{const e=document.querySelector("input"),t=document.getElementById("searchBtn"),n=document.getElementById("current"),o=document.getElementById("forcast");function i(){o.childElementCount>0&&Array.from(o.children).forEach((e=>{e.remove(),Array.from(n.children).forEach((e=>{e.remove()}))}))}function r(){let t=e.value;if(""!=t)return url="https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/"+t+"?key=QNT6S5FQ8G75ZCZS47Z2E5ZCF"}async function c(e){try{const t=await fetch(e,{mode:"cors"}),i=await t.json();!function(e){let t=document.createElement("h3"),o=document.createElement("div");o.id="iconBlock";let i=document.createElement("p"),r=document.createElement("img"),c=document.createElement("p"),d=e.resolvedAddress.split(",").slice(0,2),l=e.currentConditions.icon,a=e.description,s=e.currentConditions.conditions.toLowerCase();t.textContent="Current weather in "+d+" is "+s+".",i.textContent=e.currentConditions.temp+"Â°",r.setAttribute("src","../src/icons/"+l+".svg"),r.setAttribute("alt",l+" weather graphic icon"),c.textContent=a,o.appendChild(i),o.appendChild(r),n.appendChild(t),n.appendChild(o),n.appendChild(c)}(i),function(e){const t=document.createElement("table");let n=document.createElement("th");n.textContent="2-week forcast:";let i=document.createElement("th");i.textContent="temp-low";let r=document.createElement("th");r.textContent="temp-high",t.appendChild(n),t.appendChild(i),t.appendChild(r);let c=e.days;for(let e=0;e<c.length;e++){let n=t.insertRow();n.insertCell().textContent=c[e].datetime,n.insertCell().textContent=c[e].tempmin,n.insertCell().textContent=c[e].tempmax}o.appendChild(t)}(i),function(e){let t=document.createElement("div"),o=document.createElement("p"),i=e.currentConditions.windspeed;var r,c;r=e.currentConditions.winddir,c=Math.floor(r/22.5+.5),direction=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][c%16],o.textContent="Winds "+direction+" at "+i+" mph.",t.appendChild(o),n.appendChild(t)}(i),function(e){let t=document.createElement("div"),o=document.createElement("p"),i=e.currentConditions.precipprob;o.textContent=i+"% chance of precipitation.",t.appendChild(o),n.appendChild(t)}(i),console.log(i)}catch(e){console.log(e),alert("Whoops! Something went wrong. Please try your search again.")}}t.addEventListener("click",(()=>{""!=e.value&&(i(),r(),c(url))})),window.addEventListener("keydown",(t=>{"Enter"===t.key&&""!=e.value&&(i(),r(),c(url))}))})();